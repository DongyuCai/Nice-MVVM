/*
 * MIT License
 * 
 * Copyright (c) 2017 CaiDongyu
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
'use strict';console.log('mvvm version:18.2.5');var $NICE_MVVM=function(mvvmElementId,excludeIds){var mvvmElement=document.getElementById(mvvmElementId);var $nc=new Object();var $WATCH_QUEE={};var $watch=function(proPathAry,fun){if(typeof proPathAry==='string'){var proPath=proPathAry;proPathAry=[];proPathAry.push(proPath)}for(var i=0;i<proPathAry.length;i++){if(!$WATCH_QUEE[proPathAry[i]]){$WATCH_QUEE[proPathAry[i]]=[]}$WATCH_QUEE[proPathAry[i]].push({'proPathAry':proPathAry,'fun':fun})}};var $AFTER_RENDER=null;var $onload=function(fun){$AFTER_RENDER=fun};var $AFTER_FLUSH=null;var $onflush=function(fun){$AFTER_FLUSH=fun};var $INITED=false;var $init=function(){if(!$INITED){$INITED=true}else{var newElement=document.getElementById(mvvmElementId);newElement.innerHTML="";while(mvvmElement.childNodes&&mvvmElement.childNodes.length>0){newElement.appendChild(mvvmElement.firstChild)}mvvmElement=newElement;return false}var $SCOPE={'$DATA':$nc};var $SCOPE_DATA_=new Object();$SCOPE.$NODE_ID_POINT=1;$SCOPE.$UNREFRESH_NODE_ID=-1;$SCOPE.$V2M_NODE_MAP=new Object();var INDEX=1;$SCOPE.$ADD_V2M_NODE_MAP=function(expression,nodePack){expression=expression.replace(/\[/g,'.');expression=expression.replace(/\]/g,'');var find=false;for(var pro in $SCOPE_DATA_){var expression_=$SCOPE.$REPLACE_PROPATH(expression,pro,'');if(expression_!=expression){if(!$SCOPE.$V2M_NODE_MAP[pro]){$SCOPE.$V2M_NODE_MAP[pro]=[]}find=true;var dublicNode=false;for(var arryIndex=0;arryIndex<$SCOPE.$V2M_NODE_MAP[pro].length;arryIndex++){if($SCOPE.$V2M_NODE_MAP[pro][arryIndex].id==nodePack.id){dublicNode=true}}if(!dublicNode){$SCOPE.$V2M_NODE_MAP[pro].push($SCOPE.$COPY_NODE_PACK(nodePack))}}}if(!find){var proReg=new RegExp("^"+expression+'\\.[0-9]+\\..*');for(var pro in $SCOPE_DATA_){if(proReg.test(pro)){if(!$SCOPE.$V2M_NODE_MAP[expression]){$SCOPE.$V2M_NODE_MAP[expression]=[]}var dublicNode=false;for(var arryIndex=0;arryIndex<$SCOPE.$V2M_NODE_MAP[expression].length;arryIndex++){if($SCOPE.$V2M_NODE_MAP[expression][arryIndex].node==nodePack.node){dublicNode=true}}if(!dublicNode){$SCOPE.$V2M_NODE_MAP[expression].push($SCOPE.$COPY_NODE_PACK(nodePack))}find=true;break}}}if(!find){try{var val=eval(expression);nodePack.render(expression,val)}catch(err){}}};$SCOPE.$DEL_V2M_NODE_MAP=function(nodePackIds){var delNodePackIds=nodePackIds;var nodePackIdAry=nodePackIds.split(',');for(var i=0;i<nodePackIdAry.length;i++){if(nodePackIdAry[i]){delNodePackIds=delNodePackIds+$SCOPE.$GET_DEL_NODE_ARY(nodePackIdAry[i])}}var tmp_map={};for(var key in $SCOPE.$V2M_NODE_MAP){var tmp_ary=[];for(var i=0;$SCOPE.$V2M_NODE_MAP[key]&&i<$SCOPE.$V2M_NODE_MAP[key].length;i++){if(delNodePackIds.indexOf(','+$SCOPE.$V2M_NODE_MAP[key][i].id+',')<0){tmp_ary.push($SCOPE.$V2M_NODE_MAP[key][i])}}if(tmp_ary.length>0){tmp_map[key]=tmp_ary}}$SCOPE.$V2M_NODE_MAP=tmp_map};$SCOPE.$GET_DEL_NODE_ARY=function(nodeParentId){var delNodePackIds='';for(var key in $SCOPE.$V2M_NODE_MAP){for(var i=0;i<$SCOPE.$V2M_NODE_MAP[key].length;i++){var nodePack=$SCOPE.$V2M_NODE_MAP[key][i];if(nodePack.parentNodePackIds.indexOf(nodeParentId)>=0){if(!delNodePackIds||(','+delNodePackIds).indexOf(','+nodePack.id+',')<0){delNodePackIds=delNodePackIds+nodePack.id+','}delNodePackIds=delNodePackIds+$SCOPE.$GET_DEL_NODE_ARY(nodePack.id)}}}return delNodePackIds};$SCOPE.$REPLACE_PROPATH=function(expression,pro,newPro){var stepLen=pro.length;if(expression.indexOf(pro)>=0){var stepIndexAry=[];for(var step=0;step<expression.length&&(step+stepLen)<=expression.length;step++){var stepStr=expression.substring(step,step+stepLen);if(stepStr===pro){var preStr=step>0?expression.substring(step-1,step):'';var flagStrReg=/[_0-9a-zA-Z]/;step=step+stepLen;if(!flagStrReg.test(preStr)){if(step==expression.length){stepIndexAry.push(step)}else{var nextStr=expression.substring(step,step+1);if(!flagStrReg.test(nextStr)){stepIndexAry.push(step)}}}}}if(stepIndexAry.length>0){var expression_='';var start=0;for(var step=0;step<stepIndexAry.length;step++){var end=stepIndexAry[step]-stepLen;expression_=expression_+expression.substring(start,end);expression_=expression_+newPro;start=stepIndexAry[step]}expression_=expression_+expression.substring(start);expression=expression_}}return expression};$SCOPE.$COPY_NODE_PACK=function(nodePack){var newNodePack=new Object();for(var key in nodePack){newNodePack[key]=nodePack[key]}return newNodePack};$SCOPE.$NICE_COMMAND={'nc-value':{'commandName':'nc-value','initFunc':function(node,proPath,parentNodePackIds){var node_nc_id=$SCOPE.$NODE_ID_POINT++;var changeVal=function(){if(node.type.toLowerCase()=='checkbox'){var proPathVal=$SCOPE.$GET_VAL(proPath);if(!proPathVal){proPathVal=[]}if(node.checked){proPathVal.push(node.value)}else{var spliceIndex=-1;for(var i=0;i<proPathVal.length;i++){if(proPathVal[i]==node.value){spliceIndex=i;break}}if(spliceIndex>=0){proPathVal.splice(spliceIndex,1)}}$SCOPE.$SET_VAL(proPath,proPathVal)}else{$SCOPE.$SET_VAL(proPath,node.value)}};var onkeyupFun=node.onkeyup;var aspectOnkeyupFun=function(){changeVal();if(onkeyupFun){node.onkeyup=onkeyupFun;node.onkeyup();node.onkeyup=aspectOnkeyupFun}};node.onkeyup=aspectOnkeyupFun;var onchangeFun=node.onchange;var aspectOnchangeFun=function(){changeVal();if(onchangeFun){node.onchange=onchangeFun;node.onchange();node.onchange=aspectOnchangeFun}};node.onchange=aspectOnchangeFun;var onfocusFun=node.onfocus;var aspectOnfocusFun=function(){if(node.type.toLowerCase()=='checkbox'){}else if(node.type.toLowerCase()=='radio'){}else{}if(onfocusFun){node.onfocus=onfocusFun;node.onfocus();node.onfocus=aspectOnfocusFun}};node.onfocus=aspectOnfocusFun;var onblurFun=node.onblur;var aspectOnblurFun=function(){$SCOPE.$UNREFRESH_NODE_ID=-1;changeVal();if(onblurFun){node.onblur=onblurFun;node.onblur();node.onblur=aspectOnblurFun}};node.onblur=aspectOnblurFun;$SCOPE.$ADD_V2M_NODE_MAP(proPath,{'id':node_nc_id,'parentNodePackIds':parentNodePackIds,'node':node,'expression':proPath,'render':function(proPath,val){if(this.node.type.toLowerCase()=='checkbox'){var proPathVal=$SCOPE.$GET_VAL(proPath);this.node.checked=false;if(proPathVal){for(var i=0;i<proPathVal.length;i++){if(proPathVal[i]==this.node.value){this.node.checked=true;break}}}}else if(this.node.type.toLowerCase()=='radio'){var proPathVal=$SCOPE.$GET_VAL(proPath);this.node.checked=false;if(proPathVal==this.node.value){this.node.checked=true}}else{this.node.value=val}}});return node_nc_id}},'nc-src':{'commandName':'nc-src','initFunc':function(node,proPath,parentNodePackIds){return $SCOPE.$BIND_TXT(node,'src',parentNodePackIds)}},'nc-text':{'commandName':'nc-text','initFunc':function(node,proPath,parentNodePackIds){return $SCOPE.$BIND_TXT(node,'innerHTML',parentNodePackIds)}},'nc-for':{'commandName':'nc-for','initFunc':function(node,command,parentNodePackIds){var node_nc_id=$SCOPE.$NODE_ID_POINT++;var flag=command.substring(0,command.indexOf(' in '));flag=flag.replace(/ +/g,'');var proPath=command.substring(command.indexOf(' in ')+4);proPath=proPath.replace(/ +/g,'');var indexReg=new RegExp(flag+'\\.\\$index','g');var NEW_NODE_MAP={'id':node_nc_id,'parentNodePackIds':parentNodePackIds,'node':node,'expression':proPath,'render':function(proPath,val){val=val===null?[]:val;if(val.length>this.newNodeAry.length){for(var i=this.newNodeAry.length;i<val.length;i++){var newHtml=this.nodeHtml;newHtml=newHtml.replace(this.indexReg,i);newHtml=$SCOPE.$REPLACE_PROPATH(newHtml,this.flag,proPath+'['+i+']');var lowerNewHtml=newHtml.toLowerCase();var level=1;if(lowerNewHtml.indexOf('<tr')==0){newHtml='<table><tbody>'+newHtml+'</tbody></table>';level=2}else if(lowerNewHtml.indexOf('<td')==0){newHtml='<table><tbody><tr>'+newHtml+'</tr></tbody></table>';level=3}else if(lowerNewHtml.indexOf('<option')==0){newHtml='<select>'+newHtml+'</select>';level=1}else if(lowerNewHtml.indexOf('<ul')==0){newHtml='<ul>'+newHtml+'</ul>';level=1}else{level=0}var tmpDiv=document.createElement('div');tmpDiv.innerHTML=newHtml;var newNode=tmpDiv.childNodes[0];for(var j=0;j<level;j++){newNode=newNode.childNodes[0]}if(this.nextSibling){this.parentNode.insertBefore(newNode,this.nextSibling)}else{this.parentNode.appendChild(newNode)}var nodePackIds=$SCOPE.$INIT_MVVM(newNode,','+this.id+',');this.newNodeAry.push({'node':newNode,'nodePackIds':nodePackIds})}}else if(val.length<this.newNodeAry.length){var removeNum=this.newNodeAry.length-val.length;for(var i=0;i<removeNum;i++){var removeNode=this.newNodeAry.pop();this.parentNode.removeChild(removeNode.node);$SCOPE.$DEL_V2M_NODE_MAP(removeNode.nodePackIds)}}},'parentNode':node.parentNode,'nextSibling':node.nextSibling,'newNodeAry':[],'flag':flag,'indexReg':indexReg};node.parentNode.removeChild(node);var tmpDiv=document.createElement('div');node.removeAttribute('nc-for');tmpDiv.appendChild(node);var cloneHtml=tmpDiv.innerHTML;NEW_NODE_MAP['nodeHtml']=cloneHtml;$SCOPE.$ADD_V2M_NODE_MAP(proPath,NEW_NODE_MAP);return node_nc_id}},'nc-if':{'commandName':'nc-if','initFunc':function(node,expression,parentNodePackIds){if(node.getAttribute('nc-for')){return false}var node_nc_id=$SCOPE.$NODE_ID_POINT++;$SCOPE.$ADD_V2M_NODE_MAP(expression,{'id':node_nc_id,'parentNodePackIds':parentNodePackIds,'node':node,'expression':expression,'render':function(expression,val){if(val){if(!this.node.parentNode){if(this.nextSibling){this.parentNode.insertBefore(this.node,this.nextSibling)}else{this.parentNode.appendChild(this.node)}}}else{if(this.node.parentNode){this.node.parentNode.removeChild(this.node)}}},'parentNode':node.parentNode,'nextSibling':node.nextSibling});return node_nc_id}}};$SCOPE.$BIND_NODE=function(node,parentNodePackIds){var attributes=node.attributes;var nodePackIds='';if(attributes&&attributes.length>0){for(var i=0;i<attributes.length;i++){var nodeName=attributes[i].nodeName;var nodeValue=attributes[i].nodeValue;if($SCOPE.$NICE_COMMAND[nodeName]){var nodePackId=$SCOPE.$NICE_COMMAND[nodeName].initFunc(node,nodeValue,parentNodePackIds);if(nodePackId){if(nodePackIds.length>0){nodePackIds=nodePackIds+','}nodePackIds=nodePackIds+nodePackId}}else{var nodePackId=$SCOPE.$BIND_TXT(attributes[i],'nodeValue',parentNodePackIds);if(nodePackId){if(nodePackIds.length>0){nodePackIds=nodePackIds+','}nodePackIds=nodePackIds+nodePackId}}}}return nodePackIds};$SCOPE.$BIND_TXT=function(node,renderType,parentNodePackIds){var content='';if(renderType=='nodeValue'){content=node.nodeValue}else if(renderType=='src'){content=node.getAttribute('nc-src')}else if(renderType=='innerHTML'){content=node.getAttribute('nc-text')}if(!content){return false}else{content=content+''}var start=content.indexOf('{{');var end=content.indexOf('}}');if(start<0||end<=0){return false}var nodeTxtAry=[];var expressionAry=[];var stop=false;for(;!stop;){var first=content.substring(0,start);nodeTxtAry.push({'name':first,'value':first});var second=content.substring(start+2,end);second=second.replace(/\[/g,'.');second=second.replace(/\]/g,'');var filter='';if(second.indexOf('|')>0){filter=second.substring(second.indexOf('|')+1);second=second.substring(0,second.indexOf('|'))}filter=filter.replace(/,/g,';');expressionAry.push({'expression':second,'mainExpression':second,'filter':filter});var filterParamAry=[];if(filter.indexOf(':')>0){filterParamAry=filter.split(':')[1].split(';');for(var j=0;j<filterParamAry.length;j++){if(filterParamAry[j]){expressionAry.push({'expression':filterParamAry[j],'mainExpression':second,'filter':filter})}}}nodeTxtAry.push({'name':second,'value':'','filterParamAry':filterParamAry});var content=content.substring(end+2);start=content.indexOf('{{');end=content.indexOf('}}');if(start<0||end<=0){nodeTxtAry.push({'name':content,'value':content});stop=true}}var node_nc_ids='';for(var i=0;i<expressionAry.length;i++){var node_nc_id=$SCOPE.$NODE_ID_POINT++;if(node_nc_ids.length>0){node_nc_ids=node_nc_ids+","}node_nc_ids=node_nc_ids+node_nc_id;$SCOPE.$ADD_V2M_NODE_MAP(expressionAry[i].expression,{'id':node_nc_id,'parentNodePackIds':parentNodePackIds,'node':node,'expression':expressionAry[i].expression,'render':function(expression,val){if(expression!=this.mainExpression){val=$SCOPE.$GET_VAL(this.mainExpression)}if(this.expressionFilter){var filterExpressionAry=this.expressionFilter.split(':');var filterExpression=filterExpressionAry[0]+'(val';var filterParamValAry=[];if(filterExpressionAry.length>1){var filterParamAry=filterExpressionAry[1].split(';');for(var h=0;h<filterParamAry.length;h++){if(filterParamAry[h]){var filterParamVal=$SCOPE.$GET_VAL(filterParamAry[h]);filterParamValAry.push(filterParamVal);filterExpression=filterExpression+',filterParamValAry['+h+']'}}}filterExpression=filterExpression+',$SCOPE.$DATA)';try{val=eval(filterExpression)}catch(e){console.error('过滤器失败 '+filterExpression);console.error(e)}}var renderVal='';for(var j=0;j<this.nodeTxtAry.length;j++){if(this.nodeTxtAry[j].name==expression){this.nodeTxtAry[j].value=val}else{if(this.nodeTxtAry[j].filterParamAry&&this.nodeTxtAry[j].filterParamAry.length>0){for(var q=0;q<this.nodeTxtAry[j].filterParamAry.length;q++){if(this.nodeTxtAry[j].filterParamAry[q]==expression){this.nodeTxtAry[j].value=val;break}}}}renderVal=renderVal+this.nodeTxtAry[j].value}this.node[this.renderType]=renderVal},'mainExpression':expressionAry[i].mainExpression,'expressionFilter':expressionAry[i].filter,'nodeTxtAry':nodeTxtAry,'renderType':renderType})}return node_nc_ids};$SCOPE.$SET_VAL=function(proPath,val){proPath=proPath.replace(/\[/g,'.');proPath=proPath.replace(/\]/g,'');var pros=proPath.split('.');var obj=$SCOPE.$DATA;for(var i=0;i<pros.length;i++){if(i<pros.length-1){if(!obj[pros[i]]){obj[pros[i]]=new Object()}}else{obj[pros[i]]=val}obj=obj[pros[i]]}};$SCOPE.PRO_PATH_CACHE={};$SCOPE.$GET_VAL=function(proPath){try{if($SCOPE.PRO_PATH_CACHE[proPath]===undefined){var key=proPath;for(var pro in $SCOPE_DATA_){if(proPath.indexOf(pro)>=0){var words=proPath.split(pro);if(words.length>1){var newProPath='';for(var i=0;i<words.length-1;i++){if(words[i].length>0){if(words[i].substring(words[i].length-1)=="."){newProPath=newProPath+words[i]+pro}else{newProPath=newProPath+words[i]+'$SCOPE.$DATA.'+pro}}else{newProPath=newProPath+words[i]+'$SCOPE.$DATA.'+pro}}proPath=newProPath+words[words.length-1]}}else{}}var words=proPath.split('.');proPath='';for(var i=0;i<words.length;i++){if(proPath.length>0){if(isNaN(words[i])){proPath=proPath+'.'}else{proPath=proPath+'['}}proPath=proPath+words[i];if(!isNaN(words[i])){proPath=proPath+']'}}$SCOPE.PRO_PATH_CACHE[key]=proPath}else{proPath=$SCOPE.PRO_PATH_CACHE[proPath]}var result=eval(proPath);return result}catch(err){return undefined}};$SCOPE.$GET_PRO_SOLID_MAP=function(pKey,DATA){var emptyProSolidMap={};if(pKey){emptyProSolidMap[pKey]=DATA;pKey=pKey+'.'}else{pKey=''}if(DATA instanceof Object){for(var key in DATA){var nextMap=$SCOPE.$GET_PRO_SOLID_MAP(pKey+key,DATA[key]);for(var nextKey in nextMap){emptyProSolidMap[nextKey]=nextMap[nextKey]}}}return emptyProSolidMap};$SCOPE.$SYNC_SCOPE_DATA_=function(proSolidMap){var keys={};for(var proPath in proSolidMap){do{if($SCOPE_DATA_[proPath]===undefined&&proSolidMap[proPath]===undefined){break}if($SCOPE_DATA_[proPath]!==undefined&&$SCOPE_DATA_[proPath].value===proSolidMap[proPath]){break}var version=1;if($SCOPE_DATA_[proPath]!==undefined){version=$SCOPE_DATA_[proPath]['version']+1}$SCOPE_DATA_[proPath]={'version':version,'value':proSolidMap[proPath]};keys[proPath]=$SCOPE_DATA_[proPath]['version']}while(false)}for(var proPath in $SCOPE_DATA_){var version=$SCOPE_DATA_[proPath]['version'];do{if(keys[proPath]!==undefined){break}if(proSolidMap[proPath]===undefined){delete $SCOPE_DATA_[proPath];delete $SCOPE.$V2M_NODE_MAP[proPath];keys[proPath]=version;break}for(var i=0;$SCOPE.$V2M_NODE_MAP[proPath]&&i<$SCOPE.$V2M_NODE_MAP[proPath].length;i++){if($SCOPE.$V2M_NODE_MAP[proPath][i]['version']!==version){keys[proPath]=version;break}if($SCOPE.$V2M_NODE_MAP[proPath][i]['node']['nodeName'].toLowerCase()=='select'){if($SCOPE_DATA_[$SCOPE.$V2M_NODE_MAP[proPath][i]['expression']]){if($SCOPE.$V2M_NODE_MAP[proPath][i]['node'].value!=$SCOPE_DATA_[$SCOPE.$V2M_NODE_MAP[proPath][i]['expression']]['value']){if($SCOPE.$V2M_NODE_MAP[proPath][i]['version_pre_val_1']===undefined||$SCOPE.$V2M_NODE_MAP[proPath][i]['version_pre_val_2']===undefined){$SCOPE.$V2M_NODE_MAP[proPath][i]['version_pre_val_1']=$SCOPE_DATA_[$SCOPE.$V2M_NODE_MAP[proPath][i]['expression']]['value'];$SCOPE.$V2M_NODE_MAP[proPath][i]['version_pre_val_2']=$SCOPE.$V2M_NODE_MAP[proPath][i]['node'].value;$SCOPE.$V2M_NODE_MAP[proPath][i]['version']=0}else{if($SCOPE.$V2M_NODE_MAP[proPath][i]['version_pre_val_1']!==$SCOPE_DATA_[$SCOPE.$V2M_NODE_MAP[proPath][i]['expression']]['value']||$SCOPE.$V2M_NODE_MAP[proPath][i]['version_pre_val_2']!==$SCOPE.$V2M_NODE_MAP[proPath][i]['node'].value){delete $SCOPE.$V2M_NODE_MAP[proPath][i]['version_pre_val_1'];delete $SCOPE.$V2M_NODE_MAP[proPath][i]['version_pre_val_2']}}}}}}}while(false)}var needSyncProPath=new Object();for(var proPath in keys){var version=keys[proPath];needSyncProPath[proPath]=version;var end=proPath.lastIndexOf('.');while(end>0){proPath=proPath.substring(0,end);needSyncProPath[proPath]=version;end=proPath.lastIndexOf('.')}}return needSyncProPath};$SCOPE.$NEED_AFTER_RENDER=true;$SCOPE.$FLUSH=function(){var proSolidMap=$SCOPE.$GET_PRO_SOLID_MAP(null,$SCOPE.$DATA);var needSyncProPath=$SCOPE.$SYNC_SCOPE_DATA_(proSolidMap);var needSyncProPathSize=0;var watchStatement={};for(var proPath in needSyncProPath){needSyncProPathSize++;for(var i=0;$SCOPE.$V2M_NODE_MAP[proPath]!==undefined&&i<$SCOPE.$V2M_NODE_MAP[proPath].length;i++){var nodePack=$SCOPE.$V2M_NODE_MAP[proPath][i];nodePack['version']=needSyncProPath[proPath];if(nodePack.id==$SCOPE.$UNREFRESH_NODE_ID)continue;var val=$SCOPE.$GET_VAL(nodePack.expression);if(val===undefined){val=''}nodePack.render(nodePack.expression,val)}if($WATCH_QUEE[proPath]){for(var j=0;j<$WATCH_QUEE[proPath].length;j++){var $watchObj=$WATCH_QUEE[proPath][j];var execStatement='$watchObj.fun(';for(var k=0;k<$watchObj.proPathAry.length;k++){execStatement=execStatement+'$SCOPE.$DATA.'+$watchObj.proPathAry[k]+'';if(k<$watchObj.proPathAry.length-1){execStatement=execStatement+','}}execStatement=execStatement+')';if(!watchStatement[execStatement]){eval(execStatement);watchStatement[execStatement]=true}}}}if(needSyncProPathSize>0){$SCOPE.$NEED_AFTER_RENDER=true}else{if($SCOPE.$NEED_AFTER_RENDER){$SCOPE.$NEED_AFTER_RENDER=false;if($AFTER_RENDER){$AFTER_RENDER()}}if($AFTER_FLUSH){$AFTER_FLUSH()}}};$SCOPE.$INIT_MVVM=function(node,parentNodePackIds){if(excludeIds&&excludeIds.length>0&&(node.id||node.id+'#'=='0#')){var exclude=false;for(var i=0;i<excludeIds.length;i++){if(node.id==excludeIds[i]){exclude=true;break}}if(exclude){return''}}var nodePackIds=null;if(node.nodeType==1){nodePackIds=$SCOPE.$BIND_NODE(node,parentNodePackIds)}if(node.nodeType==3){nodePackIds=$SCOPE.$BIND_TXT(node,'nodeValue',parentNodePackIds)}var nodePackIds_4_return='';if(!nodePackIds){nodePackIds=$SCOPE.$NODE_ID_POINT++}nodePackIds_4_return=','+nodePackIds+',';if(parentNodePackIds){nodePackIds=parentNodePackIds+nodePackIds+','}else{nodePackIds=','+nodePackIds+','}var childrens=node.childNodes;for(var i=0;childrens!==undefined&&i<childrens.length;i++){$SCOPE.$INIT_MVVM(childrens[i],nodePackIds)}return nodePackIds_4_return};var proSolidMap=$SCOPE.$GET_PRO_SOLID_MAP(null,$SCOPE.$DATA,proSolidMap);$SCOPE.$SYNC_SCOPE_DATA_(proSolidMap);$SCOPE.$INIT_MVVM(mvvmElement,'');$SCOPE.$INTERVAL=setInterval(function(){$SCOPE.$FLUSH()},1)};return{'$scope':$nc,'$watch':$watch,'$onload':$onload,'$onflush':$onflush,'$init':$init}};